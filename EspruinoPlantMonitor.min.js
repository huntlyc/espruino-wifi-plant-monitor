function NetworkSave(t){this.data=t;var o=this,e={password:"PWD"};require("EspruinoWiFi").connect("ESSID",e,function(t){if(t)return void console.log("Connection error: "+t);console.log("Connected!"),o.sendInfo(o.data)})}function PlantMonitor(){this.ow=new OneWire(B1),this.tempSensor=require("DS18B20").connect(this.ow),this.intervalVal=3e5,this.currentTimeoutID=void 0,this.monitor()}NetworkSave.prototype.jsonToQueryString=function(t){return""+Object.keys(t).map(function(o){return encodeURIComponent(o)+"="+encodeURIComponent(t[o])}).join("&")},NetworkSave.prototype.sendInfo=function(t){t.auth="YOUR_SUPER_SECRET_TOKEN",content=this.jsonToQueryString(t);var o={host:"server-name.tld",port:80,protocol:"http:",path:"/path/to/endpoint/index.php",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":content.length}};require("http").request(o,function(t){t.on("data",function(t){console.log("HTTP> "+t)}),t.on("close",function(t){console.log("Connection closed")})}).end(content)},PlantMonitor.prototype.getMoistureLevel=function(){var t=0,o=analogRead(B0);return isNaN(o)||(t=Math.round(100*o),t=100-t),t},PlantMonitor.prototype.monitor=function(){this.getSensorJSON(),this.setupNextCheckInterval()},PlantMonitor.prototype.getSensorJSON=function(){var t={moisture:-1,temperature:-1};t.moisture=this.getMoistureLevel(),this.tempSensor.getTemp(function(o){t.temperature=o,new NetworkSave(t)})},PlantMonitor.prototype.getSensorInfo=function(){var t=this.getMoistureLevel();console.log("Soil is "+t+"% saturated"),this.tempSensor.getTemp(function(t){console.log("amb tmp is "+t+"Â°C")})},PlantMonitor.prototype.setupNextCheckInterval=function(){var t=this;void 0!==this.currentTimeoutID&&clearTimeout(this.currentTimeoutID),this.currentTimeoutID=setTimeout(function(){t.monitor()},this.intervalVal)};var pm=new PlantMonitor;