function NetworkSave(t){var o=this;this.data=t;var e={password:"WIFI_PWD"};this.wifi=require("EspruinoWiFi"),this.wifi.connect("ESSID",e,function(t){if(t)return void(CODE_DEBUG&&console.log("Connection error: "+t));CODE_DEBUG&&console.log("Connected!"),o.sendInfo(o.data)})}function PlantMonitor(){this.ow=new OneWire(B1),this.tempSensor=require("DS18B20").connect(this.ow),this.intervalVal=6e4,this.currentTimeoutID=void 0,this.monitor()}var CODE_DEBUG=!1;NetworkSave.prototype.jsonToQueryString=function(t){return""+Object.keys(t).map(function(o){return encodeURIComponent(o)+"="+encodeURIComponent(t[o])}).join("&")},NetworkSave.prototype.sendInfo=function(t){var o=this;t.auth="YOUR_SUPER_SECRET_TOKEN",content=this.jsonToQueryString(t);var e={host:"endpointserver.tld",port:80,protocol:"http:",path:"/path/to/data/app/",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":content.length}};require("http").request(e,function(t){t.on("data",function(t){CODE_DEBUG&&console.log("HTTP> "+t)}),t.on("close",function(t){CODE_DEBUG&&console.log("HTTP Request Closed"),o.wifi.disconnect()})}).end(content)},PlantMonitor.prototype.getMoistureLevel=function(){var t=0,o=analogRead(B0);return isNaN(o)||(t=Math.round(100*o),t=100-t),t},PlantMonitor.prototype.monitor=function(){this.getSensorJSON(),this.setupNextCheckInterval()},PlantMonitor.prototype.getSensorJSON=function(){var t={moisture:-1,temperature:-1};t.moisture=this.getMoistureLevel(),this.tempSensor.getTemp(function(o){t.temperature=o,new NetworkSave(t)})},PlantMonitor.prototype.getSensorInfo=function(){var t=this.getMoistureLevel();console.log("Soil is "+t+"% saturated"),this.tempSensor.getTemp(function(t){console.log("amb tmp is "+t+"Â°C")})},PlantMonitor.prototype.setupNextCheckInterval=function(){var t=this;void 0!==this.currentTimeoutID&&clearTimeout(this.currentTimeoutID),this.currentTimeoutID=setTimeout(function(){t.monitor()},this.intervalVal)},setTimeout(function(){if(CODE_DEBUG){console.log("starting");new PlantMonitor}},1e3);